<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Grid Coordinate Visualization</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #333;
            color: #fff;
            font-family: 'Arial', sans-serif;
        }
        svg {
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <div id="svgContainer"></div>
    <script>
        const Colors = {
            EVEN: `#222`,   // Darker shade for even
            ODD: `#666`,    // Lighter gray for odd
            FILL: `#53eeef` // Cyan for highlight
        };

        const coordinate = { x: 499, y: 499 }; // Example coordinate; change to see different highlights

        const gridSize = 500;
        const sectionsPerSide = 3;
        const sectionSize = gridSize / sectionsPerSide;

        const size = 512 / sectionsPerSide; // SVG cell size
        const padding = size * 0.1;
        const cellSize = size - 2 * padding;

        const sectionX = Math.floor(coordinate.x / sectionSize);
        const sectionY = Math.floor(coordinate.y / sectionSize);

        const svgX = sectionX;
        const svgY = sectionsPerSide - 1 - sectionY;

        let svgContent = `<defs><filter id="shadow" x="0" y="0" width="200%" height="200%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
            <feOffset dx="2" dy="2" result="offsetblur"/>
            <feComponentTransfer>
                <feFuncA type="linear" slope="0.5"/>
            </feComponentTransfer>
            <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter></defs>`;
        svgContent += `<rect x="0" y="0" width="512" height="512" fill="#000" />`; // Background

        // Create grid cells
        for (let y = 2; y >= 0; y--) {
            for (let x = 0; x < 3; x++) {
                const posX = x * size + padding;
                const posY = y * size + padding;
                const isHighlighted = x === svgX && y === svgY;
                const fill = isHighlighted ? Colors.FILL : ((x + y) % 2 === 0 ? Colors.EVEN : Colors.ODD);
                svgContent += `<rect x="${posX}" y="${posY}" width="${cellSize}" height="${cellSize}" fill="${fill}" stroke="#fff" stroke-width="2" filter="url(#shadow)"/>`;
            }
        }

        const textFill = Colors.FILL;
        const fontSize = 48;
        const textPositionY = svgY > 1 ? 55 : 457; // Adjusted position to ensure visibility
        const coordinateText = `[${coordinate.x}, ${coordinate.y}]`;

        // Text background rectangle
        const textWidth = 400; // Approximate text width, adjust as needed
        const textHeight = 60; // Approximate text height, adjust as needed
        const textBgX = 256 - textWidth / 2; // Centered on the text
        const textBgY = textPositionY - fontSize +5 * 0.8; // Slightly above the text baseline

        svgContent += `<rect x="${textBgX}" y="${textBgY}" width="${textWidth}" height="${textHeight}" fill="rgba(0,0,0,0.6)" />`;
        svgContent += `<text x="256" y="${textPositionY}" fill="${textFill}" font-size="${fontSize}" text-anchor="middle" font-weight="bold" stroke="#000" stroke-width="2" painting-order="fill stroke ">${coordinateText}</text>`;

        svgContent = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="512" height="512">${svgContent}</svg>`;

        document.getElementById('svgContainer').innerHTML = svgContent;
    </script>
</body>
</html>
